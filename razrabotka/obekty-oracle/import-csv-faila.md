# Импорт CSV файла

Импорт .csv файла \(pkg\_docs\_util.clob\_to\_table\)

Описание процедур

Стандартные процедуры импорта позволяют импортировать объект clob, который:

- может быть загружен в документ, в таблицу VMDB\_DOCS\_OLE

для этого нужно вызвать процедуру со следующими параметрами

```sql
procedure clob_to_table
(
p_nrdoc number,
p_nrdoc1 number,
p_struct_id number,
p_do_delete boolean := true,
p_separator varchar2 := chr(9)
)
```

,где p\_nrdoc и p\_nrdoc1 - это идентификаторы строки с объектом clob в таблице VMDB\_DOCS\_OLE.

- можно передать при вызове процедуры

```sql
procedure clob_to_table
(
p_clob clob,
p_struct_id number,
p_do_delete boolean := true,
p_separator varchar2 := chr(9)
)
```

При вызове процедуры необходимо указать значение параметра p\_struct\_id  - это идентификатор описания структуры временной таблицы, которую необходимо описывать в таблицах:

TMS\_LOAD\_INFO, TMS\_LOAD\_STRUCT.

Описание таблиц

Необходимо создать временную таблицу с определенной структурой. \(on commit preserve rows\).

В таблице tms\_load\_info есть параметры:

 PACK\_SEPARATORS - если значение = 1, то при импорте файла будут удалены повторяющиеся разделители

UNQUOTE\_VALUES  - если значение = 1, то при импорте будут удалены кавычки справа и слева в полях типа S \(string\) \(работает некорректно\).

Так же есть обязательные для заполнения поля:

ID, TABLENAME, которые нужны для задания уникального идентификатора и названия временной таблицы.

В таблице TMS\_LOAD\_STRUCT необходимо описать каждое поле временной таблицы с текущим ID.

При этом указывается номер по порядку - COL \(порядок полей должен быть таким же, как в файле .csv\), название поля COLUMNNAME, тип поля TYPE, размер поля PREC, остальные параметры не обязательны для заполнения.

