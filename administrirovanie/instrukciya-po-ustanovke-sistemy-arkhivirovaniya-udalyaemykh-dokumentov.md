# Инструкция по установке системы архивирования удаляемых документов

Установка выполняется в три действия:

- создание новой схемы Oracle, в которой будут сохраняться документы

- настройка новой формы в программе Administrator.exe для просмотра архива

- добавление свойства в программе Administrator.exe для включения режима



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Создание схемы выполняется при помощи скрипта DocsBckp.sql



Этот скрипт надо предварительно отредактировать. В нем предполагается,

что надо создать схему TUTUN\_BK для сохранения документов из схемы TUTUN.

Открыв скрипт в программе TOAD.exe, при помощи функции "Поиск и замена"

\("Replace"\) заменить все вхождения TUTUN на нужное имя схемы Oracle

\(имя реально существующей схемы с данными Universal Accounting\).

Имя TUTUN\_BK при этом везде должно замениться на новое имя схемы.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Настройка новой формы выполняется при помощи скрипта FormBckp.txt

При необходимости после этого можно настроить дизайн грида и сохранить.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Режим сохранения удаляемых документов в архиве включается свойством



Backup=true



в секции System Settings\Docs раздела "Настройки"



Можно скопировать в буфер обмена следующие 4 строчки:



\[ZZZ\]

Backup=true

.type.Backup=Boolean

.listValue.Backup=true,false



и вставить их в программе Administrator.exe командой "Вставить свойство"



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

После правильного и успешного выполнения вышеперечисленных действий

при удалении документов через пользовательский интерфейс программы

uniacCLNT.exe они должны попадать в архив, представляющий собой набор

одноименных таблиц в созданной схеме, в которых сохранены все записи,

относящиеся к удаляемому документу. Форма "Архив удаленных документов"

показывает содержимое архива в виде таблицы, аналогичной по структуре

таблице TMDB\_DOCS. Восстановить документ можно при помощи Action 1,

удалить документ в архиве можно при помощи Action 2 или при помощи

простого удаления записи в форме "Архив удаленных документов".



