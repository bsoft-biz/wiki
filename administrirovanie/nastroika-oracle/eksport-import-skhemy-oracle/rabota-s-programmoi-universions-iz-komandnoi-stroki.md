# Работа с программой UniVersions из командной строки

  
Работа с командной строкой

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

Параметры командной строки un4Versions.exe строятся по следующим правилам:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. Порядок перечисления параметров не играет роли, но для удобства понимания

   желательно перечислять их в порядке убывания важности

   \(параметр cmd, например, указывать первым\)

2. Каждый параметр строится по схеме NNN=VVVVV,

   где NNN - имя параметра, а VVVVV - его значение.

   Исключение составляет параметр cmd - для него существует

   альтернативный способ задания через символ "/": /YYYYY

3. Некоторые параметры в некоторых случаях могут иметь значения по умолчанию.

   Значение по умолчанию используется только при полном отсутствии параметра.

   Если параметр указан с пустым значением - значение по умолчанию не используется.

4. Параметр cmd задает задачу, которую должна выполнить программа.

   Интерпретация некоторых других параметров \(src, tgt, file, path\)

   зависит от значения параметра cmd

5. Параметры cfg и flt используются вне зависимости от значения параметра cmd

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Пример: Запуск с открытой вкладкой сравнения схем

&gt; un4Versions.exe /compare

&gt; un4Versions.exe cmd=compare

Предыдущие два примера идентичны по смыслу

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

Параметры, не зависящие от значения параметра cmd

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

cfg - задает имя файла, из которого нужно считать настройки программы

      \(если параметр пуст или не указан, настройки считываются из реестра\)

flt - задает имя файла, из которого нужно считать фильтр сравнения схем

      \(если параметр пуст или не указан, фильтр считывается из реестра\)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Пример: Использование фильтра для объектов AFIX

&gt; un4Versions.exe /compare flt=flt\_afix.ini

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

Режимы работы программы, задаваемые параметром cmd

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\_\_\_\_\_\_\_\_\_\_\_

cmd=compare

~~~~~~~~~~~

Переход к окну сравнения схем и \(опционально\) загрузка одной или двух

частей окна сравнения из указанных источников - схем Oracle или файлов

Примеры:

&gt; un4Versions.exe /compare

&gt; un4Versions.exe /compare src=un4@ora64

&gt; un4Versions.exe /compare tgt=zorile@catalog src=D:\Good\un4std.pak

Программа открывается сразу в режиме сравнения схем.

Если заданы оба параметра src и tgt, то соответствующие схемы загружаются

в обе панели \(tgt - в левую, src - в правую часть окна сравнения\).

Если задан только параметр src или только параметр tgt,

то соответствующая схема загружается в левую часть окна сравнения.

Если параметры src и tgt не заданы, то никакие схемы не загружаются.

Если имя схемы в параметре src или tgt задано в круглых скобках,

то структура загружается из сохраненного в самой схеме текста

\(поле STEXT\_SCRIPT таблицы XVERS\_DBID\)

Если параметр tgt или src содержит имя файла с расширением .pak,

то файл вначале распаковывается, и из него извлекается файл schema.xml

\_\_\_\_\_\_\_\_\_\_\_

cmd=strsave

~~~~~~~~~~~

Загрузка схемы из указанного источника и сохранение ее в файл

\(Программа работает в невидимом режиме и завершается после выполнения задачи\)

Примеры:

&gt; un4Versions.exe /strsave src=un4@ora64

&gt; un4Versions.exe /strsave src=un4@ora64 file=un4@ora64.pak

Если параметр file не содержит полного пути к файлу,

то файл сохраняется в каталоге запуска программы

Если параметр file не имеет расширения, то используется расширение .pak

Если параметр file имеет расширение .pak, то файл сохраняется

в запакованном виде \(используется алгоритм zip\)

Если параметр file не указан или пуст, то имя файла строится как

&lt;schema&gt;@&lt;server&gt;.pak \(как во втором примере\)

\_\_\_\_\_\_\_\_\_\_

cmd=strexp

~~~~~~~~~~

Загрузка структуры из указанной схемы и сохранение ее в XVERS\_DBID

\(Программа работает в невидимом режиме и завершается после выполнения задачи\)

Пример:

&gt; un4Versions.exe /strexp src=un4@ora64

\_\_\_\_\_\_\_\_\_\_

cmd=cmplog

~~~~~~~~~~

Загрузка двух частей окна сравнения из указанных источников

\(схем Oracle или файлов\) и сохранение протокола различий в файл

\(Программа работает в невидимом режиме и завершается после выполнения задачи\)

Примеры:

&gt; un4Versions.exe /cmplog tgt=zorile@catalog

&gt; un4Versions.exe /cmplog tgt=tutun@ora64 src=\(tutun@ora64\) file=cmp\_tutun.log

&gt; un4Versions.exe /cmplog tgt=zorile@catalog src=D:\Good\un4std.pak

Если параметр src не задан - используется файл un4std.pak в каталоге запуска

Если параметр tgt или src содержит имя файла без указания полного пути,

то файл открывается в каталоге запуска программы

Если параметр tgt или src содержит имя файла с расширением .pak,

то файл вначале распаковывается, и из него извлекается файл schema.xml

Если имя схемы в параметре src или tgt задано в круглых скобках,

то структура загружается из сохраненного в самой схеме текста

\(поле STEXT\_SCRIPT таблицы XVERS\_DBID\)

Если параметр file не задан - используется файл compare.log в каталоге запуска

Если параметр file не содержит полного пути к файлу,

то файл сохраняется в каталоге запуска программы

\_\_\_\_\_\_\_\_\_\_

cmd=srccod

~~~~~~~~~~

Загрузка исходных текстов PL/SQL-объектов из указанной схемы Oracle

\(загружаются только тексты функций, процедур и пакетов\)

и сохранение их в отдельных файлах в указанном каталоге

\(Программа работает в невидимом режиме и завершается после выполнения задачи\)

Примеры:

&gt; un4Versions.exe /srccod src=un4public@ora64

&gt; un4Versions.exe /srccod src=un4public@ora64 path=D:\SQL\un4public

Если параметр path не задан - используется каталог запуска

\_\_\_\_\_\_\_\_\_\_\_\_

cmd=versions

~~~~~~~~~~~~

Загрузка содержимого таблицы XVERSIONS из указанной схемы Oracle

и сохранение ее в файл

\(Программа работает в невидимом режиме и завершается после выполнения задачи\)

Примеры:

&gt; un4Versions.exe /versions

&gt; un4Versions.exe /versions src=un4@ora10g1

&gt; un4Versions.exe /versions src=un4@ora10g1 file=versions.pak

Если параметр src не указан, то используется схема un4@ora1

Если параметр file не указан, то используется файл upgrade.pak

Если параметр file не содержит полного пути к файлу,

то файл сохраняется в каталоге запуска программы

Если параметр file имеет расширение .pak, то файл сохраняется

в запакованном виде \(используется алгоритм zip\)

